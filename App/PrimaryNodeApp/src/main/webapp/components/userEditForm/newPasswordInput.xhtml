<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns = "http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui = "http://java.sun.com/jsf/facelets">
    <body>
        <ui:composition>
            <script type="text/javascript">
                function validatePasswordInputs() {
                    var messageNode = document.getElementById('newTaskForm:password_2_message');
                    messageNode.innerHTML = '';
                    if (PF('password_1').jq.val() !== PF('password_2').jq.val()) {
                        var span_1 = document.createElement('SPAN');
                        var span_2 = document.createElement('SPAN');
                        var div = document.createElement('DIV');
                        span_1.classList.add('ui-message-error-icon');
                        span_2.classList.add('ui-message-error-detail');
                        span_2.textContent = 'Zadaná hesla se neshodují';
                        div.appendChild(span_1);
                        div.appendChild(span_2);
                        messageNode.appendChild(div);
                        messageNode.classList.add('ui-message-error', 'ui-widget', 'ui-corner-all');
                        messageNode.style.display = 'inline-block';
                    } else {
                        messageNode.style.display = 'none';
                    }
                }
            </script>
            <div class="p-grid p-field p-nogutter">
                <p:outputLabel for="password_1" styleClass="p-col-3 p-sm-3 p-md-3 p-lg-2 p-xl-2 p-sm-offset-2 p-md-offset-2 p-lg-offset-3 p-xl-offset-4" value="Nové heslo: " />
                <div class="p-col-9 p-sm-5 p-md-5 p-lg-4 p-xl-2">
                    <p:password id="password_1" widgetVar="password_1" value="#{PARAM_password_1_value}" match="password_2" feedback="true" required="true" requiredMessage="Zadejte nové heslo"
                                weakLabel="Slabé" goodLabel="Dobré" strongLabel="Silné"
                                promptLabel="Zadejte heslo uživatele"
                                placeholder="Zadejte nové heslo"
                                validatorMessage="Zadaná hesla se neshodují nebo je heslo příliš krátké - heslo musí mít minimálně 6 znaků."
                                onkeyup="validatePasswordInputs();"
                                >
                        <f:validateLength minimum="6" ></f:validateLength>
                    </p:password>
                </div>
            </div>

            <div class="p-grid p-field p-nogutter">
                <p:outputLabel for="password_1" styleClass="p-col-3 p-sm-3 p-md-3 p-lg-2 p-xl-2 p-sm-offset-2 p-md-offset-2 p-lg-offset-3 p-xl-offset-4" value="Nové heslo znovu: " />
                <div class="p-col-9 p-sm-5 p-md-5 p-lg-4 p-xl-2">
                    <p:password id="password_2" widgetVar="password_2" value="#{PARAM_password_2_value}" feedback="false" required="true" requiredMessage="Zadejte nové heslo znovu"
                                promptLabel="Zadejte znovu heslo uživatele"
                                placeholder="Zadejte nové heslo znovu"
                                onkeyup="validatePasswordInputs();"
                                />
                </div>
                <div class="p-col-12 p-sm-5 p-md-5 p-lg-3 p-xl-2 p-sm-offset-5 p-lg-offset-0 p-xl-offset-0">
                    <p:message id="password_2_message" for="password_2" />
                </div>
            </div>

            <script type="text/javascript">
                var messageNode = document.getElementById('newTaskForm:password_2_message');
                messageNode.innerHTML = '';
                messageNode.style.display = 'none';

            </script>
        </ui:composition>
    </body>
</html>
